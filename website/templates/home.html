<!DOCTYPE html>
<html>
<title>W3.CSS Template</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- // skyscraper start // -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Document</title>

 <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
 <!-- // skyscraper end // -->

<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">

<style>
body,h1,h2{font-family: "Raleway", sans-serif}
body, html {height: 100%}
p {line-height: 2}
.bgimg, .bgimg2 {
  min-height: 100%;
  background-position: center;
  background-size: cover;
}
.bgimg {background-image: url("/static/css/bldg03.jpg")}
.bgimg2 {background-image: url("/static/css/mountain05.jpg")}

tr.detail {
display: none;
width: 100%;
}
tr.detail div {
display: none;
}
.showmore:hover {
cursor: pointer;
}


</style>
<body>

<!-- Header / Home-->
<header class="w3-display-container w3-wide bgimg w3-grayscale-min" id="home">
  <div class="w3-display-middle w3-text-white w3-center">
    <div class = "test">
    <h1 class="w3-card-4 w3-jumbo">M O U N T A I N<br>S K Y S C R A P E R</h1>
    <h2>Map & Info</h2>
    <h2><b></b></h2>
    </div>
  </div>
</header>

<!-- Navbar (sticky bottom) -->
<div class="w3-bottom w3-hide-small">
  <div class="w3-bar w3-white w3-center w3-padding w3-opacity-min w3-hover-opacity-off">
    <a href="#home" style="width:25%" class="w3-bar-item w3-button">Home</a>
    <a href="#mountain" style="width:25%" class="w3-bar-item w3-button">MOUNTAINS</a>
    <a href="#skyscraper" style="width:25%" class="w3-bar-item w3-button">SKYSCRAPERS</a>
    <a href="#rsvp" style="width:25%" class="w3-bar-item w3-button w3-hover-black">MEMBER</a>
  </div>
</div>

<!-- mountain information -->
<div class="w3-container w3-padding-64 w3-pale-red w3-grayscale-min" id="mountain">
  <div class="w3-content">
    <h1 class="w3-center w3-text-grey"><b>M O U N T A I N S</b></h1>
    <!-- 지도자리 -->

    <div class="container w3-card">

      {{ mountain_map|safe }}

  </div>

  <div class="container">
      <table class="table table-striped">
          <thead>
              <tr>
                  <th>id</th>
                  <th>name</th>
                  <th>title</th>
                  <th>height</th>
              </tr>
          </thead>
          <tbody id="posts">
              {% for i in first_page %}
                  <tr>
                      <td>{{i.id}}</td>
                      <td>{{i.name}}</td>
                      <td>{{i.title}}</td>
                      <td>{{i.height}}</td>
                      <td><button class="showmore" value={{i.id}}>more</button></td>
                  </tr>
                  <tr class="detail">

                  </tr>
              {% endfor %}
          </tbody>
      </table>


      <ul class="pagination justify-content-center">
          <!-- 이전페이지 -->
          {% if data.has_previous %}
          <li class="page-item">
              <a class="page-link" href="data.previous_page_number">이전</a>
          </li>
          {% else %}
          <li class="page-item disabled">
              <a class="page-link" tabindex="-1" aria-disabled="true" href="#">이전</a>
          </li>
          {% endif %}
          <!-- 페이지리스트 -->
          {% for page_number in page_range %}
              {% if page_number == data.number %}
              <li class="page-item active" aria-current="page">
                  <a class="page-link" href="{{page_number}}">{{ page_number }}</a>
              </li>
              {% else %}
              <li class="page-item">
                  <a class="page-link" href="{{page_number}}">{{ page_number }}</a>
              </li>
              {% endif %}
          {% endfor %}
          <!-- 다음페이지 -->
          {% if data.has_next %}
          <li class="page-item">
              <a class="page-link" href="{{data.next_page_number}}">다음</a>
          </li>
          {% else %}
          <li class="page-item disabled">
              <a class="page-link" tabindex="-1" aria-disabled="true" href="#">다음</a>
          </li>
          {% endif %}
      </ul>
  </div>




<script>
  $('a').click(function(event){
      event.preventDefault();
      var page_n = $(this).attr('href');
      // ajax
          $.ajax({
                  type: "POST",
                  url: "{% url 'mountains:listajax' %}", // name of url
                  data:{
                      page_n : page_n, //page_number
                      csrfmiddlewaretoken: '{{ csrf_token }}'
                  },
                  success: function (jsonObj) {
                      console.log(jsonObj)
                      $('#posts').html('');
                      $('tr').each(function(i, val) {
                          for (var data of jsonObj['results']) {
                              console.log(data['name'])
                              //loop
                              //apending posts
                              var txt = '<tr><td>'+data['id']+'</td><td>'+data['name']+'</td><td>'+data['title']+'</td><td>'+data['height']+'</td></tr>'
                              $('#posts').append(txt);
                          };
                      });
                  },
                  error: function () {}
          });
  });

  // table sliding toggle
  $(function() {
      $('button.showmore').click(function(e) {
          e.preventDefault();

          // We break and store the result so we can use it to hide
          // the row after the slideToggle is closed
          var targetrow = $(this).closest('tr').next('.detail');
          var id = $(this).attr('value');
              $.ajax({
                      type: "POST",
                      url: "{% url 'mountains:listajax_detail' %}", // name of url
                      data:{
                          id : id,
                          csrfmiddlewaretoken: '{{ csrf_token }}'
                      },
                      success: function (jsonObj) {
                          targetrow.append('');
                          data = jsonObj['results'][0]
                          var txt0 = "<td colspan='3'><div><table class='table table-striped'><tbody>"
                          var txt1 = "<tr><td>id</td><td>"+data['id']+"</td></tr><tr><td>name</td><td>"+data['name']
                          var txt2 = "</td></tr><tr><td>title</td><td>"+data['title']+"</td></tr><tr><td>site</td><td>"+data['site']
                          var txt3 = "</td></tr><tr><td>height</td><td>"+data['height']+"</td></tr><tr><td>feature</td><td>"+data['feature']
                          var txt4 = "</td></tr><tr><td>overview</td><td>"+data['overview']+"</td></tr><tr><td>information</td><td>"+data['information']
                          var txt5 = "</td></tr><tr><td>leadtime</td><td>"+data['leadtime']+"</td></tr><tr><td>x_coord</td><td>"+data['x_coord']
                          var txt6 = "</td></tr><tr><td>y_coord</td><td>"+data['y_coord']+"</td></tr>"
                          var txt = txt0 + txt1 + txt2 + txt3 + txt4 + txt5 + txt6
                          targetrow.append(txt);

                          targetrow.show().find('div').slideToggle('fast', function(){
                              if (!$(this).is(':visible')) {
                                  targetrow.hide();
                              }
                          });
                      },
                      error: function () {}
              });


      });
  });


</script>


</body>
</html>


<script>
$(function() {
$('a.showmore').click(function(e) {
  e.preventDefault();
  // We break and store the result so we can use it to hide
  // the row after the slideToggle is closed
  var targetrow = $(this).closest('tr').next('.detail');
  targetrow.show().find('div').slideToggle('slow', function(){
    if (!$(this).is(':visible')) {
      targetrow.hide();
    }
  });
});
});
</script>
    <!-- 지도 끝 -->
  </div>
</div>


<!-- Mountain List -->
<div class="w3-row-padding" style="margin:0 -16px" id = "mt_list">
  <div class="w3-half;center">

  </div>

</div>
</div>

<!-- Background photo -->

<div class="w3-display-container bgimg2">
  <div class="w3-display-middle w3-text-white w3-center">
    <h1 class="w3-jumbo">TO THE WORLD!</h1><br>
    <h2>finding skyscrapers..</h2>
  </div>
</div>

<!-- skyscrapers information -->

<div class="w3-container w3-padding-64 w3-pale-red w3-grayscale-min w3-center" id="skyscraper">
  <div class="w3-content">
    <h1 class="w3-text-grey"><b>S K Y S C R A P E R S</b></h1>
    <!-- // <img class="w3-round-large w3-grayscale-min" src="/w3images/wedding_location.jpg" style="width:100%;margin:64px 0"> // -->
<<<<<<< HEAD

    <div class="container w3-card w3-margin ">
    {{ bldg_map|safe }} 
    </div>    

        <!-- // skyscraper list start // -->
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>순위</th>
                    <th>건물명</th>
                    <th>도시명(국가)</th>
                    <th>높이(m)</th>
                </tr>
            </thead>
            <tbody>
                {% for row in data %}
                <tr>
                    <td><a href="{% url 'buildings:bldg_detail' row.id %}">{{row.id}}</a></td>
                    <td><a href="{% url 'buildings:bldg_detail' row.id %}">{{row.ranking}}</a></td>
                    <td><a href="{% url 'buildings:bldg_detail' row.id %}">{{row.building_name}}</a></td>
                    <td><a href="{% url 'buildings:bldg_detail' row.id %}">{{row.city_name}}({{row.country}})</a></td>
                    <td><a href="{% url 'buildings:bldg_detail' row.id %}">{{row.height_m}} {{"m"}}</a></td>
                    <td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <ul class="pagination justify-content-center">
            <!-- 이전페이지 -->
            {% if data.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page={{ data.previous_page_number }}">이전</a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <a class="page-link" tabindex="-1" aria-disabled="true" href="#">이전</a>
            </li>
            {% endif %}
            <!-- 페이지리스트 -->
            {% for page_number in data.paginator.page_range %}
                {% if page_number == data.number %}
                <li class="page-item active" aria-current="page">
                    <a class="page-link" href="?page={{ page_number }}">{{ page_number }}</a>
                </li>
                {% else %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ page_number }}">{{ page_number }}</a>
                </li>
                {% endif %}
            {% endfor %}
            <!-- 다음페이지 -->
            {% if data.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ data.next_page_number }}">다음</a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <a class="page-link" tabindex="-1" aria-disabled="true" href="#">다음</a>
            </li>
            {% endif %}
        </ul>
        <!-- // skyscraper list end // -->

=======
    {{ bldg_map|safe }} 
        
        <!-- // skyscraper list start // -->
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>순위</th>
                    <th>건물명</th>
                    <th>도시명(국가)</th>
                    <th>높이(m)</th>
                </tr>
            </thead>
            <tbody>
                {% for row in data %}
                <tr>
                    <td><a href="{% url 'buildings:bldg_detail' row.id %}">{{row.id}}</a></td>
                    <td><a href="{% url 'buildings:bldg_detail' row.id %}">{{row.ranking}}</a></td>
                    <td><a href="{% url 'buildings:bldg_detail' row.id %}">{{row.building_name}}</a></td>
                    <td><a href="{% url 'buildings:bldg_detail' row.id %}">{{row.city_name}}({{row.country}})</a></td>
                    <td><a href="{% url 'buildings:bldg_detail' row.id %}">{{row.height_m}} {{"m"}}</a></td>
                    <td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <ul class="pagination justify-content-center">
            <!-- 이전페이지 -->
            {% if data.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page={{ data.previous_page_number }}">이전</a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <a class="page-link" tabindex="-1" aria-disabled="true" href="#">이전</a>
            </li>
            {% endif %}
            <!-- 페이지리스트 -->
            {% for page_number in data.paginator.page_range %}
                {% if page_number == data.number %}
                <li class="page-item active" aria-current="page">
                    <a class="page-link" href="?page={{ page_number }}">{{ page_number }}</a>
                </li>
                {% else %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ page_number }}">{{ page_number }}</a>
                </li>
                {% endif %}
            {% endfor %}
            <!-- 다음페이지 -->
            {% if data.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ data.next_page_number }}">다음</a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <a class="page-link" tabindex="-1" aria-disabled="true" href="#">다음</a>
            </li>
            {% endif %}
        </ul>
        <!-- // skyscraper list end // -->

      </div>
        <!-- Labels / tags -->
      <div class="w3-card w3-margin">
        <div class="w3-container w3-padding">
          <h4>Tags</h4>
        </div>
        <div class="w3-container w3-white">
        <p><span class="w3-tag w3-black w3-margin-bottom">Travel</span> <span class="w3-tag w3-light-grey w3-small w3-margin-bottom">New York</span> <span class="w3-tag w3-light-grey w3-small w3-margin-bottom">London</span>
          <span class="w3-tag w3-light-grey w3-small w3-margin-bottom">IKEA</span> <span class="w3-tag w3-light-grey w3-small w3-margin-bottom">NORWAY</span> <span class="w3-tag w3-light-grey w3-small w3-margin-bottom">DIY</span>
          <span class="w3-tag w3-light-grey w3-small w3-margin-bottom">Ideas</span> <span class="w3-tag w3-light-grey w3-small w3-margin-bottom">Baby</span> <span class="w3-tag w3-light-grey w3-small w3-margin-bottom">Family</span>
          <span class="w3-tag w3-light-grey w3-small w3-margin-bottom">News</span> <span class="w3-tag w3-light-grey w3-small w3-margin-bottom">Clothing</span> <span class="w3-tag w3-light-grey w3-small w3-margin-bottom">Shopping</span>
          <span class="w3-tag w3-light-grey w3-small w3-margin-bottom">Sports</span> <span class="w3-tag w3-light-grey w3-small w3-margin-bottom">Games</span>
        </p>
        </div>
      </div>
    </div>
  </div>
</div>
>>>>>>> 961952e460615e60396c28acd870153f498b3742



<!-- skyscraper list -->
<div class="w3-row-padding" style="margin:10 -16px" id = "bldg_list">
  <div class="w3-half">


  </div>
  <div class="w3-half">


  </div>
</div>
<!-- End MT photo -->


<!-- RSVP section -->
<div class="w3-container w3-padding-64 w3-pale-red w3-center w3-wide" id="rsvp">
  <br><br><br><br><br><br>
  <h1>WANT TO CONTACT US?</h1>
  <p class="w3-large">PLEASE, PRESS THE bUTTON</p>

  <p class="w3-xlarge">
    <button onclick="document.getElementById('id01').style.display='block'" class="w3-button w3-round w3-red w3-opacity w3-hover-opacity-off" style="padding:8px 60px">CONTACT</button>
  </p>
  <br><br><br>
  <p class="w3-large">< M E M B E R S ></M></p>
  <p class="w3-pale-red w3-center w3-wide">Oh Eun-Seok</p>
  <p class="w3-pale-red w3-center w3-wide">Kim Jin-Bae</p>
  <p class="w3-pale-red w3-center w3-wide">Choi Eugene</p>

</div>

<!-- RSVP modal -->
<div id="id01" class="w3-modal">
  <div class="w3-modal-content w3-card-4 w3-animate-zoom" style="padding:32px;max-width:600px">
    <div class="w3-container w3-white w3-center">
      <h1 class="w3-wide">라면..아니 코딩하고 갈래?</h1>
      <p>잘 생각 해봐~ 중식 라면제공!</p>
      <form>
        <input class="w3-input w3-border" type="text" placeholder="Name(s)" name="name">
      </form>
      <p><i>코딩하고갈래</i></p>
      <div class="w3-row">
        <div class="w3-half">
          <button onclick="document.getElementById('id01').style.display='none'" type="button" class="w3-button w3-block w3-green">한다</button>
        </div>
        <div class="w3-half">
          <button onclick="document.getElementById('id01').style.display='none'" type="button" class="w3-button w3-block w3-red">안한다</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Footer -->
<footer class="w3-center w3-black w3-padding-16">
  <p>Published by 코딩하고갈래?</p>
</footer>
<div class="w3-hide-small" style="margin-bottom:32px"> </div>



<script>
    $('a').click(function(event){
        event.preventDefault();
        var page_n = $(this).attr('href');
        // ajax
            $.ajax({
                    type: "POST",
                    url: "{% url 'mountains:listajax' %}", // name of url
                    data:{
                        page_n : page_n, //page_number
                        csrfmiddlewaretoken: '{{ csrf_token }}'
                    },
                    success: function (jsonObj) {
                        console.log(jsonObj)
                        $('#posts').html('');
                        $('tr').each(function(i, val) {
                            for (var data of jsonObj['results']) {
                                console.log(data['name'])
                                //loop
                                //apending posts
                                var txt = '<tr><td>'+data['id']+'</td><td>'+data['name']+'</td><td>'+data['title']+'</td><td>'+data['height']+'</td></tr>'
                                $('#posts').append(txt);
                            };
                        });
                    },
                    error: function () {}
            });
    });

    // table sliding toggle
    $(function() {
        $('button.showmore').click(function(e) {
            e.preventDefault();

            // We break and store the result so we can use it to hide
            // the row after the slideToggle is closed
            var targetrow = $(this).closest('tr').next('.detail');
            var id = $(this).attr('value');
                $.ajax({
                        type: "POST",
                        url: "{% url 'mountains:listajax_detail' %}", // name of url
                        data:{
                            id : id,
                            csrfmiddlewaretoken: '{{ csrf_token }}'
                        },
                        success: function (jsonObj) {
                            targetrow.append('');
                            data = jsonObj['results'][0]
                            var txt0 = "<td colspan='3'><div><table class='table table-striped'><tbody>"
                            var txt1 = "<tr><td>id</td><td>"+data['id']+"</td></tr><tr><td>name</td><td>"+data['name']
                            var txt2 = "</td></tr><tr><td>title</td><td>"+data['title']+"</td></tr><tr><td>site</td><td>"+data['site']
                            var txt3 = "</td></tr><tr><td>height</td><td>"+data['height']+"</td></tr><tr><td>feature</td><td>"+data['feature']
                            var txt4 = "</td></tr><tr><td>overview</td><td>"+data['overview']+"</td></tr><tr><td>information</td><td>"+data['information']
                            var txt5 = "</td></tr><tr><td>leadtime</td><td>"+data['leadtime']+"</td></tr><tr><td>x_coord</td><td>"+data['x_coord']
                            var txt6 = "</td></tr><tr><td>y_coord</td><td>"+data['y_coord']+"</td></tr>"
                            var txt = txt0 + txt1 + txt2 + txt3 + txt4 + txt5 + txt6
                            targetrow.append(txt);

                            targetrow.show().find('div').slideToggle('fast', function(){
                                if (!$(this).is(':visible')) {
                                    targetrow.hide();
                                }
                            });
                        },
                        error: function () {}
                });


        });
    });


</script>





</body>
</html>
